
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for drift protocol-v2"
        >
    <title>protocol-v2 API</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-37e63de6.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;typescript&quot;,&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div class="logo-wrapper">
        <img src="images/logo-a64972c9.png" class="logo" alt="" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="typescript">typescript</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#terms-of-use" class="toc-h1 toc-link" data-title="Terms of Use">Terms of Use</a>
          </li>
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#program-addresses" class="toc-h2 toc-link" data-title="Program Addresses">Program Addresses</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#client" class="toc-h1 toc-link" data-title="Client">Client</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#typescript" class="toc-h2 toc-link" data-title="Typescript">Typescript</a>
                  </li>
                  <li>
                    <a href="#python" class="toc-h2 toc-link" data-title="Python">Python</a>
                  </li>
                  <li>
                    <a href="#connection" class="toc-h2 toc-link" data-title="Connection">Connection</a>
                  </li>
                  <li>
                    <a href="#wallet" class="toc-h2 toc-link" data-title="Wallet">Wallet</a>
                  </li>
                  <li>
                    <a href="#client-initialization" class="toc-h2 toc-link" data-title="Client Initialization">Client Initialization</a>
                  </li>
                  <li>
                    <a href="#user-initialization" class="toc-h2 toc-link" data-title="User Initialization">User Initialization</a>
                  </li>
                  <li>
                    <a href="#updating-user" class="toc-h2 toc-link" data-title="Updating User">Updating User</a>
                  </li>
                  <li>
                    <a href="#switching-sub-accounts" class="toc-h2 toc-link" data-title="Switching Sub Accounts">Switching Sub Accounts</a>
                  </li>
                  <li>
                    <a href="#deleting-user-account" class="toc-h2 toc-link" data-title="Deleting User Account">Deleting User Account</a>
                  </li>
                  <li>
                    <a href="#depositing" class="toc-h2 toc-link" data-title="Depositing">Depositing</a>
                  </li>
                  <li>
                    <a href="#withdrawing" class="toc-h2 toc-link" data-title="Withdrawing">Withdrawing</a>
                  </li>
                  <li>
                    <a href="#transferring-deposits" class="toc-h2 toc-link" data-title="Transferring Deposits">Transferring Deposits</a>
                  </li>
                  <li>
                    <a href="#order-types" class="toc-h2 toc-link" data-title="Order Types">Order Types</a>
                  </li>
                  <li>
                    <a href="#placing-perp-order" class="toc-h2 toc-link" data-title="Placing Perp Order">Placing Perp Order</a>
                  </li>
                  <li>
                    <a href="#placing-spot-order" class="toc-h2 toc-link" data-title="Placing Spot Order">Placing Spot Order</a>
                  </li>
                  <li>
                    <a href="#canceling-order" class="toc-h2 toc-link" data-title="Canceling Order">Canceling Order</a>
                  </li>
                  <li>
                    <a href="#canceling-order-by-user-order-id" class="toc-h2 toc-link" data-title="Canceling Order By User Order Id">Canceling Order By User Order Id</a>
                  </li>
                  <li>
                    <a href="#cancel-orders" class="toc-h2 toc-link" data-title="Cancel Orders">Cancel Orders</a>
                  </li>
                  <li>
                    <a href="#modifying-order" class="toc-h2 toc-link" data-title="Modifying Order">Modifying Order</a>
                  </li>
                  <li>
                    <a href="#modifying-order-by-user-order-id" class="toc-h2 toc-link" data-title="Modifying Order By User Order Id">Modifying Order By User Order Id</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#user" class="toc-h1 toc-link" data-title="User">User</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user" class="toc-h2 toc-link" data-title="Get User">Get User</a>
                  </li>
                  <li>
                    <a href="#getting-deposit-borrow-amounts" class="toc-h2 toc-link" data-title="Getting Deposit/Borrow Amounts">Getting Deposit/Borrow Amounts</a>
                  </li>
                  <li>
                    <a href="#get-perp-position" class="toc-h2 toc-link" data-title="Get Perp Position">Get Perp Position</a>
                  </li>
                  <li>
                    <a href="#get-order" class="toc-h2 toc-link" data-title="Get Order">Get Order</a>
                  </li>
                  <li>
                    <a href="#get-order-by-user-order-id" class="toc-h2 toc-link" data-title="Get Order By User Order Id">Get Order By User Order Id</a>
                  </li>
                  <li>
                    <a href="#get-open-orders" class="toc-h2 toc-link" data-title="Get Open Orders">Get Open Orders</a>
                  </li>
                  <li>
                    <a href="#get-unrealized-perp-pnl" class="toc-h2 toc-link" data-title="Get Unrealized Perp Pnl">Get Unrealized Perp Pnl</a>
                  </li>
                  <li>
                    <a href="#get-unrealized-funding-pnl" class="toc-h2 toc-link" data-title="Get Unrealized Funding Pnl">Get Unrealized Funding Pnl</a>
                  </li>
                  <li>
                    <a href="#get-total-collateral" class="toc-h2 toc-link" data-title="Get Total Collateral">Get Total Collateral</a>
                  </li>
                  <li>
                    <a href="#get-margin-requirement" class="toc-h2 toc-link" data-title="Get Margin Requirement">Get Margin Requirement</a>
                  </li>
                  <li>
                    <a href="#get-free-collateral" class="toc-h2 toc-link" data-title="Get Free Collateral">Get Free Collateral</a>
                  </li>
                  <li>
                    <a href="#get-leverage" class="toc-h2 toc-link" data-title="Get Leverage">Get Leverage</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#orderbook" class="toc-h1 toc-link" data-title="Orderbook">Orderbook</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#slot-subscription" class="toc-h2 toc-link" data-title="Slot Subscription">Slot Subscription</a>
                  </li>
                  <li>
                    <a href="#user-subscription" class="toc-h2 toc-link" data-title="User Subscription">User Subscription</a>
                  </li>
                  <li>
                    <a href="#orderbook-subscription" class="toc-h2 toc-link" data-title="Orderbook Subscription">Orderbook Subscription</a>
                  </li>
                  <li>
                    <a href="#get-l2-orderbook" class="toc-h2 toc-link" data-title="Get L2 Orderbook">Get L2 Orderbook</a>
                  </li>
                  <li>
                    <a href="#get-l3-orderbook" class="toc-h2 toc-link" data-title="Get L3 Orderbook">Get L3 Orderbook</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-endpoints" class="toc-h1 toc-link" data-title="API Endpoints">API Endpoints</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#contracts" class="toc-h2 toc-link" data-title="Contracts">Contracts</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#historical-data" class="toc-h1 toc-link" data-title="Historical Data">Historical Data</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#url-prefix" class="toc-h2 toc-link" data-title="URL Prefix">URL Prefix</a>
                  </li>
                  <li>
                    <a href="#url-suffix" class="toc-h2 toc-link" data-title="URL Suffix">URL Suffix</a>
                  </li>
                  <li>
                    <a href="#examples" class="toc-h2 toc-link" data-title="Examples">Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/drift-labs/protocol-v2/releases/'> release history </a></li>
            <li><a href='https://docs.drift.trade/'> Read more about Drift Protocol in Archbee</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='terms-of-use'>Terms of Use</h1>
<p>By using any API provided by Drift Labs, you agree to the <a href="https://docs.drift.trade/terms-of-use">Terms of Use</a>. If you do not agree to the foregoing, then do not use any such API.</p>
<h1 id='introduction'>Introduction</h1>
<p>Drift Protocol is an <a href="https://github.com/drift-labs/protocol-v2/">open-sourced</a>, decentralised exchange built on the <a href="https://solana.com">Solana</a> blockchain, enabling transparent and non-custodial trading on cryptocurrencies.</p>

<p>There are language bindings in <a href="https://github.com/drift-labs/protocol-v2/tree/master/sdk">Typescript</a> and <a href="https://github.com/drift-labs/driftpy">Python</a>! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p>This API documentation page is open sourced and available <a href="https://github.com/drift-labs/v2-teacher">here</a> was created with <a href="https://github.com/slatedocs/slate">Slate</a>. Feel free to submit questions/comments in <a href="https://github.com/drift-labs/v2-teacher/issues">Issues</a> or suggest changes as a <a href="https://github.com/drift-labs/v2-teacher/pulls">PR</a>.</p>
<h2 id='program-addresses'>Program Addresses</h2>
<aside class="notice">
  All documented descriptions are for the following deployed programs IDs of the protocol.
</aside>

<table><thead>
<tr>
<th>Enviroment</th>
<th>Program ID</th>
<th>User Interface</th>
</tr>
</thead><tbody>
<tr>
<td>mainnet-beta</td>
<td><a href="https://solscan.io/account/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH">dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH</a></td>
<td><a href="https://app.drift.trade">app</a></td>
</tr>
<tr>
<td>devnet</td>
<td><a href="https://solscan.io/account/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH?cluster=devnet">dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH</a></td>
<td><a href="https://beta.drift.trade">app</a></td>
</tr>
</tbody></table>

<aside class="warning">
  It is strictly against the [Terms of Use](https://docs.drift.trade/terms-of-use) to use these interfaces from a Restricted Territory.
</aside>
<h1 id='authentication'>Authentication</h1>
<p>To access and interact with a blockchain, such as Solana, you need a keypair, which consists of a public key and a private key. The private key should be kept secure and not shared with anyone else.</p>

<p>To generate a new keypair, you can use the <a href="https://docs.solana.com/cli/install-solana-cli-tools">Solana Tool Suite</a> by running the following command on the command line:</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">solana</span><span class="o">-</span><span class="nx">keygen</span> <span class="k">new</span> <span class="o">--</span><span class="nx">outfile</span> <span class="o">~</span><span class="sr">/.config/</span><span class="nx">solana</span><span class="o">/</span><span class="nx">my</span><span class="o">-</span><span class="nx">keypair</span><span class="p">.</span><span class="nx">json</span>
</code></pre></div>
<p>This command will create a new keypair and store it in a JSON file located at ~/.config/solana/my-keypair.json.</p>

<p>To allow SDK code to use this keypair for authentication, you need to set the ANCHOR_WALLET environment variable to the path of the JSON file that contains the keypair. You can do this by running the following command:</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">export</span> <span class="nx">ANCHOR_WALLET</span><span class="o">=~</span><span class="sr">/.config/</span><span class="nx">solana</span><span class="o">/</span><span class="nx">my</span><span class="o">-</span><span class="nx">keypair</span><span class="p">.</span><span class="nx">json</span>
</code></pre></div>
<p>This command sets the ANCHOR_WALLET environment variable to the path of the JSON file that contains your keypair, so that SDK code can access it when needed.</p>

<aside class="notice">
  You must replace <code>~/.config/solana/my-keypair.json</code> with your personal key.
</aside>
<h1 id='client'>Client</h1><h2 id='typescript'>Typescript</h2>
<p>Install @drift-labs/sdk from <a href="https://www.npmjs.com/package/@drift-labs/sdk">npm</a> using yarn:</p>

<p><code>yarn add @drift-labs/sdk</code></p>

<p>auto-generated documentation here: https://drift-labs.github.io/protocol-v2/sdk/</p>
<h2 id='python'>Python</h2>
<p>Install driftpy from PyPI using pip:</p>

<p><code>pip install driftpy</code></p>

<p>auto-generated documentation here: https://drift-labs.github.io/driftpy/</p>
<h2 id='connection'>Connection</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Connection</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@solana/web3.js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mainnet-beta.solana.com</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>
<p>The connection object is used to send transactions to the Solana blockchain. It is used by the DriftClient to send transactions to the blockchain.</p>
<h2 id='wallet'>Wallet</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Wallet</span><span class="p">,</span> <span class="nx">loadKeypair</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">keyPairFile</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">~/.config/solana/my-keypair.json</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Wallet</span><span class="p">(</span><span class="nx">loadKeypair</span><span class="p">(</span><span class="nx">privateKeyFile</span><span class="p">));</span>
</code></pre></div>
<p>The wallet used to sign solana transactions. The wallet can be created from a private key or from a keypair file.</p>

<p>Make sure this wallet has some SOL first. SOL is used to pay for transactions and is required as rent for account intializations.</p>
<h2 id='client-initialization'>Client Initialization</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">Connection</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@solana/web3.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Wallet</span><span class="p">,</span> <span class="nx">loadKeypair</span><span class="p">,</span> <span class="nx">DriftClient</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mainnet-beta.solana.com</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">keyPairFile</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">~/.config/solana/my-keypair.json</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Wallet</span><span class="p">(</span><span class="nx">loadKeypair</span><span class="p">(</span><span class="nx">privateKeyFile</span><span class="p">))</span>

<span class="kd">const</span> <span class="nx">driftClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DriftClient</span><span class="p">({</span>
  <span class="nx">connection</span><span class="p">,</span>
  <span class="nx">wallet</span><span class="p">,</span>
  <span class="na">env</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mainnet-beta</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>  <span class="kn">import</span> <span class="nn">driftpy</span><span class="p">;</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>connection</td>
<td>Connection object specifying solana rpc url</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>wallet</td>
<td>The wallet used to sign transactions sent to solana blockchain</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>programId</td>
<td>Drift program id</td>
<td>Yes</td>
<td>dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH</td>
</tr>
<tr>
<td>env</td>
<td><code>devnet</code> or <code>mainnet-beta</code>. Used to automatically derive market accounts to subscribe to if they&#39;re not explicitly set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>perpMarketIndexes</td>
<td>Which perp markets accounts to subscribe to.</td>
<td>Yes</td>
<td>Derived based on env</td>
</tr>
<tr>
<td>spotMarketIndexes</td>
<td>Which spot markets accounts to subscribe to.</td>
<td>Yes</td>
<td>Derived based on env</td>
</tr>
<tr>
<td>oracleInfos</td>
<td>Which oracles accounts to subscribe to.</td>
<td>Yes</td>
<td>Derived based on env</td>
</tr>
<tr>
<td>accountSubscription</td>
<td>Whether to use websocket or polling to subscribe to on-chain accounts e.g. markets, users, oracle.</td>
<td>Yes</td>
<td>Websockets</td>
</tr>
<tr>
<td>opts</td>
<td>Transaction confirmation status options</td>
<td>Yes</td>
<td>{preflightCommitment: &quot;processed&quot;, commitment: &quot;processed&quot;}</td>
</tr>
<tr>
<td>activeSubAccountId</td>
<td>Which sub account to use initially</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>subAccountIds</td>
<td>All the sub account ids to subscribe to. If this and authoritySubAccountMap are empty, subscribes to all sub account ids.</td>
<td>Yes</td>
<td>[]</td>
</tr>
<tr>
<td>authority</td>
<td>Which user account authority you&#39;re signing for. Only set if you&#39;re signing for delegated account.</td>
<td>Yes</td>
<td>wallet.publicKey</td>
</tr>
<tr>
<td>authoritySubAccountMap</td>
<td>Map of authority to sub account ids to subscribe to. Only necessary if using multiple delegate accounts. If this and subAccountIds are empty, subscribes to all sub account ids.</td>
<td>Yes</td>
<td>{}</td>
</tr>
<tr>
<td>includeDelegates</td>
<td>Whether or not to subscribe to delegates when subAccountIds and authoritySubAccountMap are empty</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>userStats</td>
<td>Whether or not to listen subscribe to user stats account.</td>
<td>Yes</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='user-initialization'>User Initialization</h2>
<aside class="notice">
  initializing a new drift user account requires some rent (~.035 SOL). this can be reclaimed upon deletion.
</aside>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="p">[</span><span class="nx">txSig</span><span class="p">,</span> <span class="nx">userPublickKey</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">initializeUser</span><span class="p">(</span>
  <span class="mi">0</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">toly</span><span class="dl">"</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>subAccountId</td>
<td>The sub account id for the new user account.</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>name</td>
<td>Display name for the user account</td>
<td>Yes</td>
<td>Main Account</td>
</tr>
<tr>
<td>referrerInfo</td>
<td>The address of the referrer and referrer stats accounts</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>Sub account ids are monotonic. The first user account created will have sub account id 0, the second will have sub account id 1, etc.
The next sub account id can be found by calling <code>driftClient.getNextSubAccountId()</code>.</p>
<h2 id='updating-user'>Updating User</h2>
<p>Users accounts can update names, set custom max intial margin ratio, enable margin trading, and add a delegate account.</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">subaccountId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// set max 1x intiial leverage</span>
<span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">driftClient</span><span class="p">.</span><span class="nx">updateUserCustomMarginRatio</span><span class="p">(</span>
  <span class="nx">MARGIN_PRECISION</span><span class="p">,</span> 
  <span class="nx">subaccountId</span>
<span class="p">);</span>

<span class="c1">// enable spot margin trading</span>
<span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">driftClient</span><span class="p">.</span><span class="nx">updateUserMarginTradingEnabled</span><span class="p">(</span>
  <span class="kc">true</span><span class="p">,</span>
  <span class="nx">subaccountId</span>
<span class="p">);</span>

<span class="c1">// add a delegate this user account</span>
<span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">driftClient</span><span class="p">.</span><span class="nx">updateUserDelegate</span><span class="p">(</span>
  <span class="k">new</span> <span class="nx">PublicKey</span><span class="p">(</span><span class="dl">'</span><span class="s1">satoshi</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">subaccountId</span>
<span class="p">);</span>
</code></pre></div><h2 id='switching-sub-accounts'>Switching Sub Accounts</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">driftClient</span><span class="p">.</span><span class="nx">switchActiveUser</span><span class="p">(</span>
  <span class="mi">1</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>subAccountId</td>
<td>The sub account to switch to</td>
<td>No</td>
<td>0</td>
</tr>
<tr>
<td>authority</td>
<td>The authority of the sub account you&#39;re signing for. Only needed for delegate accounts</td>
<td>Yes</td>
<td>Current authority</td>
</tr>
</tbody></table>
<h2 id='deleting-user-account'>Deleting User Account</h2>
<p>If an account contains no assets or liabilites, a user account can be deleted to reclaim rent.</p>
<div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="nx">driftClient</span><span class="p">.</span><span class="nx">deleteUser</span><span class="p">(</span>
  <span class="mi">1</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div><h2 id='depositing'>Depositing</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToSpotPrecision</span><span class="p">(</span><span class="nx">marketIndex</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">associatedTokenAccount</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">getAssociatedTokenAccount</span><span class="p">(</span><span class="nx">marketIndex</span><span class="p">);</span>

<span class="nx">driftClient</span><span class="p">.</span><span class="nx">deposit</span><span class="p">(</span>
  <span class="nx">amount</span><span class="p">,</span>
  <span class="nx">marketIndex</span><span class="p">,</span>
  <span class="nx">associatedTokenAccount</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>The amount to deposit in spot market&#39;s token mint precision</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The spot market index you&#39;re depositing into</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>associatedTokenAccount</td>
<td>The public key of the token account you&#39;re depositing from. For sol, it can be the wallet&#39;s public key</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>subAccountId</td>
<td>The sub account you&#39;re depositing too</td>
<td>Yes</td>
<td>active sub account</td>
</tr>
<tr>
<td>reduceOnly</td>
<td>Whether the deposit should only reduce borrow</td>
<td>Yes</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='withdrawing'>Withdrawing</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToSpotPrecision</span><span class="p">(</span><span class="nx">marketIndex</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">associatedTokenAccount</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">getAssociatedTokenAccount</span><span class="p">(</span><span class="nx">marketIndex</span><span class="p">);</span>

<span class="nx">driftClient</span><span class="p">.</span><span class="nx">withdraw</span><span class="p">(</span>
  <span class="nx">amount</span><span class="p">,</span>
  <span class="nx">marketIndex</span><span class="p">,</span>
  <span class="nx">associatedTokenAccount</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>The amount to withdraw in spot market&#39;s token mint precision</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The spot market index you&#39;re withdrawing from</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>associatedTokenAccount</td>
<td>The public key of the token account you&#39;re withdrawing to. For sol, it can be the wallet&#39;s public key</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>reduceOnly</td>
<td>Whether the withdraw should only decrease a deposit and block a new borrow</td>
<td>Yes</td>
<td>false</td>
</tr>
</tbody></table>

<p>Withdrawing can lead to a borrow if the user has no deposits in the market and the user has enough margin to cover it.</p>
<h2 id='transferring-deposits'>Transferring Deposits</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToSpotPrecision</span><span class="p">(</span><span class="nx">marketIndex</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fromSubAccountId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">toSubAccountId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nx">driftClient</span><span class="p">.</span><span class="nx">transferDeposit</span><span class="p">(</span>
  <span class="nx">amount</span><span class="p">,</span>
  <span class="nx">marketIndex</span><span class="p">,</span>
  <span class="nx">fromSubAccountId</span><span class="p">,</span>
  <span class="nx">toSubAccountId</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>The amount to transfer in spot market&#39;s token mint precision</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The spot market index you&#39;re transferring deposits in</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>fromSubAccountId</td>
<td>The sub account you&#39;re withdrawing from</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>toSubAccountId</td>
<td>The sub account you&#39;re depositing too</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='order-types'>Order Types</h2>
<p>MARKET, LIMIT, ORACLE orders all support auction parameters.</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>MARKET</td>
<td>Market order.</td>
</tr>
<tr>
<td>LIMIT</td>
<td>Limit order.</td>
</tr>
<tr>
<td>TRIGGER_MARKET</td>
<td>Stop / Take-profit market order.</td>
</tr>
<tr>
<td>TRIGGER_LIMIT</td>
<td>Stop / Take-profit limit order.</td>
</tr>
<tr>
<td>ORACLE</td>
<td>Market order using oracle offset for auction parameters.</td>
</tr>
</tbody></table>
<h2 id='placing-perp-order'>Placing Perp Order</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="c1">// market buy for 100 SOL-PERP @ $21.20-&gt;$21.30 over 60 slots (~30 seconds) </span>
<span class="c1">// after 60 slots, market buy 100 SOL-PERP @ $21.35 until maxTs</span>
<span class="kd">const</span> <span class="nx">orderParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">orderType</span><span class="p">:</span> <span class="nx">OrderType</span><span class="p">.</span><span class="nx">MARKET</span><span class="p">,</span> 
  <span class="na">marketIndex</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">direction</span><span class="p">:</span> <span class="nx">PositionDirection</span><span class="p">.</span><span class="nx">LONG</span><span class="p">,</span>
  <span class="na">baseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPerpPrecision</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
  <span class="na">auctionStartPrice</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(</span><span class="mf">21.20</span><span class="p">),</span>
  <span class="na">auctionEndPrice</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(</span><span class="mf">21.30</span><span class="p">),</span>
  <span class="na">price</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(</span><span class="mf">21.35</span><span class="p">),</span>
  <span class="na">auctionDuration</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">maxTs</span><span class="p">:</span> <span class="nx">now</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">placePerpOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>

<span class="c1">// bid for 100 SOL-PERP @ $21.23 </span>
<span class="kd">const</span> <span class="nx">orderParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">orderType</span><span class="p">:</span> <span class="nx">OrderType</span><span class="p">.</span><span class="nx">LIMIT</span><span class="p">,</span> 
  <span class="na">marketIndex</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">direction</span><span class="p">:</span> <span class="nx">PositionDirection</span><span class="p">.</span><span class="nx">LONG</span><span class="p">,</span>
  <span class="na">baseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPerpPrecision</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
  <span class="na">price</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(</span><span class="mf">21.23</span><span class="p">),</span>
<span class="p">}</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">placePerpOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>

<span class="c1">// ask for 100 SOL-PERP @ ${OraclePrice} + .05</span>
<span class="kd">const</span> <span class="nx">orderParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">orderType</span><span class="p">:</span> <span class="nx">OrderType</span><span class="p">.</span><span class="nx">LIMIT</span><span class="p">,</span> 
  <span class="na">marketIndex</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">direction</span><span class="p">:</span> <span class="nx">PositionDirection</span><span class="p">.</span><span class="nx">SHORT</span><span class="p">,</span>
  <span class="na">baseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPerpPrecision</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
  <span class="na">oraclePriceOffset</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(.</span><span class="mi">05</span><span class="p">).</span><span class="nx">toNumber</span><span class="p">(),</span>
<span class="p">}</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">placePerpOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>orderType</td>
<td>The type of order e.g. market, limit</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The market to place order in</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>direction</td>
<td>The direction of order e.g. long (bid) or short (ask)</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>baseAssetAmount</td>
<td>The amount of base asset to buy or sell</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketType</td>
<td>The type of market order is for e.g. PERP or SPOT</td>
<td>Yes</td>
<td>PERP</td>
</tr>
<tr>
<td>price</td>
<td>The limit price for order</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>userOrderId</td>
<td>Unique order id specified by user</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>reduceOnly</td>
<td>If the order can only reduce positions</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>postOnly</td>
<td>If the order can only be a maker</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>triggerPrice</td>
<td>at what price order is triggered. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>triggerCondition</td>
<td>whether order is triggered above or below triggerPrice. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>oraclePriceOffset</td>
<td>priceOffset for oracle derived limit price. only applicable for limit and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionDuration</td>
<td>how many slots the auction lasts. only applicable for market and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionStartPrice</td>
<td>the price the auction starts at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionEndPrice</td>
<td>the price the auction ends at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>maxTs</td>
<td>the max timestamp (on-chain unix timestamp) before the order expires</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>
<h2 id='placing-spot-order'>Placing Spot Order</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">orderParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">orderType</span><span class="p">:</span> <span class="nx">OrderType</span><span class="p">.</span><span class="nx">LIMIT</span><span class="p">,</span>
  <span class="na">marketIndex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">direction</span><span class="p">:</span> <span class="nx">PositionDirection</span><span class="p">.</span><span class="nx">LONG</span><span class="p">,</span>
  <span class="na">baseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToSpotPrecision</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
  <span class="na">price</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPricePrecision</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">placeSpotOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>orderType</td>
<td>The type of order e.g. market, limit</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The market to place order in</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>direction</td>
<td>The direction of order e.g. long (bid) or short (ask)</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>baseAssetAmount</td>
<td>The amount of base asset to buy or sell</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>marketType</td>
<td>The type of market order is for e.g. PERP or SPOT</td>
<td>Yes</td>
<td>SPOT</td>
</tr>
<tr>
<td>price</td>
<td>The limit price for order</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>userOrderId</td>
<td>Unique order id specified by user</td>
<td>Yes</td>
<td>0</td>
</tr>
<tr>
<td>reduceOnly</td>
<td>If the order can only reduce positions</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>postOnly</td>
<td>If the order can only be a maker</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>triggerPrice</td>
<td>at what price order is triggered. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>triggerCondition</td>
<td>whether order is triggered above or below triggerPrice. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>oraclePriceOffset</td>
<td>priceOffset for oracle derived limit price. only applicable for limit and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionDuration</td>
<td>how many slots the auction lasts. only applicable for market and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionStartPrice</td>
<td>the price the auction starts at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionEndPrice</td>
<td>the price the auction ends at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>maxTs</td>
<td>the max timestamp before the order expires</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>
<h2 id='canceling-order'>Canceling Order</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">orderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">cancelOrder</span><span class="p">(</span><span class="nx">orderId</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>The order being canceled</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='canceling-order-by-user-order-id'>Canceling Order By User Order Id</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">userOrderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">cancelOrderByUserOrderId</span><span class="p">(</span><span class="nx">userOrderId</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>userOrderId</td>
<td>Unique order id specified by user when order was placed</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cancel-orders'>Cancel Orders</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">marketType</span> <span class="o">=</span> <span class="nx">MarketType</span><span class="p">.</span><span class="nx">PERP</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">direction</span> <span class="o">=</span> <span class="nx">PositionDirection</span><span class="p">.</span><span class="nx">LONG</span><span class="p">;</span>
<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">cancelOrders</span><span class="p">(</span><span class="nx">marketType</span><span class="p">,</span> <span class="nx">marketIndex</span><span class="p">,</span> <span class="nx">direction</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketType</td>
<td>The market type of orders to cancel. Must be set if marketIndex set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The market index of orders to cancel. Must be set if marketType set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>direction</td>
<td>The direction of orders to cancel.</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>To cancel all orders, do not set any parameters.</p>
<h2 id='modifying-order'>Modifying Order</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">updateParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">orderId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">newBaseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPerpPrecision</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">modifyOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>The order id of order to modify</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>newBaseAssetAmount</td>
<td>The amount of base asset to buy or sell</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newDirection</td>
<td>The direction of order e.g. long (bid) or short (ask)</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newLimitPrice</td>
<td>The limit price for order</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>reduceOnly</td>
<td>If the order can only reduce positions</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>postOnly</td>
<td>If the order can only be a maker</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newTriggerPrice</td>
<td>at what price order is triggered. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newTriggerCondition</td>
<td>whether order is triggered above or below triggerPrice. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newOraclePriceOffset</td>
<td>priceOffset for oracle derived limit price. only applicable for limit and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionDuration</td>
<td>how many slots the auction lasts. only applicable for market and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionStartPrice</td>
<td>the price the auction starts at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionEndPrice</td>
<td>the price the auction ends at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>maxTs</td>
<td>the max timestampe before the order expires</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>Modify order cancels and places a new order.</p>
<h2 id='modifying-order-by-user-order-id'>Modifying Order By User Order Id</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>
<span class="kd">const</span> <span class="nx">updateParams</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">userOrderId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">newBaseAssetAmount</span><span class="p">:</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">convertToPerpPrecision</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">modifyOrder</span><span class="p">(</span><span class="nx">orderParams</span><span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>userOrderId</td>
<td>The user order id of order to modify</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>newBaseAssetAmount</td>
<td>The amount of base asset to buy or sell</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newDirection</td>
<td>The direction of order e.g. long (bid) or short (ask)</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newLimitPrice</td>
<td>The limit price for order</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>reduceOnly</td>
<td>If the order can only reduce positions</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>postOnly</td>
<td>If the order can only be a maker</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newTriggerPrice</td>
<td>at what price order is triggered. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newTriggerCondition</td>
<td>whether order is triggered above or below triggerPrice. only applicable for triggerMarket and triggerLimit orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>newOraclePriceOffset</td>
<td>priceOffset for oracle derived limit price. only applicable for limit and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionDuration</td>
<td>how many slots the auction lasts. only applicable for market and oracle orders</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionStartPrice</td>
<td>the price the auction starts at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>auctionEndPrice</td>
<td>the price the auction ends at</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>maxTs</td>
<td>the max timestampe before the order expires</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>Modify order cancels and places a new order.</p>
<h1 id='user'>User</h1><h2 id='get-user'>Get User</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>   <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">getUser</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>subAccountId</td>
<td>The sub account id of user to get</td>
<td>Yes</td>
<td>active sub account</td>
</tr>
<tr>
<td>authority</td>
<td>The authority of user to get. Only necessary if using multiple delegate accounts</td>
<td>Yes</td>
<td>current authority</td>
</tr>
</tbody></table>
<h2 id='getting-deposit-borrow-amounts'>Getting Deposit/Borrow Amounts</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">tokenAmount</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getTokenAmount</span><span class="p">(</span>
  <span class="nx">marketIndex</span><span class="p">,</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">isDeposit</span> <span class="o">=</span> <span class="nx">tokenAmount</span><span class="p">.</span><span class="nx">gte</span><span class="p">(</span><span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">isBorrow</span> <span class="o">=</span> <span class="nx">tokenAmount</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketIndex</td>
<td>Market index for the spot market</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>

<p>If token amount is greater than 0, it is a deposit. If less than zero, it is a borrow.</p>
<h2 id='get-perp-position'>Get Perp Position</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">marketIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">baseAssetAmount</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getPerpPosiiton</span><span class="p">(</span>
  <span class="nx">marketIndex</span><span class="p">,</span>
<span class="p">)?.</span><span class="nx">baseAssetAmount</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">isLong</span> <span class="o">=</span> <span class="nx">baseAssetAmount</span><span class="p">.</span><span class="nx">gte</span><span class="p">(</span><span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">isShort</span> <span class="o">=</span> <span class="nx">baseAssetAmount</span><span class="p">.</span><span class="nx">lt</span><span class="p">(</span><span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketIndex</td>
<td>Market index for the perp market</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>

<p>If base amount is greater than 0, it is a long. If less than zero, it is a short.</p>
<h2 id='get-order'>Get Order</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">orderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getOrder</span><span class="p">(</span>
  <span class="nx">orderId</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>Order id for the order you&#39;re getting</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-order-by-user-order-id'>Get Order By User Order Id</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">userOrderId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getOrderByUserOrderId</span><span class="p">(</span>
  <span class="nx">userOrderId</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>userOrderId</td>
<td>User order id for the order you&#39;re getting</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-open-orders'>Get Open Orders</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getOpenOrders</span><span class="p">();</span>
</code></pre></div><h2 id='get-unrealized-perp-pnl'>Get Unrealized Perp Pnl</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">pnl</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getUnrealizedPNL</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>withFunding</td>
<td>Whether to included unsettled funding payments</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>marketIndex</td>
<td>Whether to only return pnl for specific market</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-unrealized-funding-pnl'>Get Unrealized Funding Pnl</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">pnl</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getUnrealizedFundingPNL</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketIndex</td>
<td>Whether to only return pnl for specific market</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-total-collateral'>Get Total Collateral</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">totalCollateral</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getTotalCollateral</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marginCategory</td>
<td>Initial or Maintenance</td>
<td>Yes</td>
<td>Initial</td>
</tr>
</tbody></table>

<p>Asset weights vary based on whether you&#39;re checking the initial or maintenance margin requirement. Initial is used for initial leverage extension, maintenance for determining liquidations.</p>
<h2 id='get-margin-requirement'>Get Margin Requirement</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">marginRequirement</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getMarginRequirement</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marginCategory</td>
<td>Initial or Maintenance</td>
<td>Yes</td>
<td>Initial</td>
</tr>
</tbody></table>

<p>Liability weights (for borrows) and margin ratios (for perp positions) vary based on whether you&#39;re checking the initial or maintenance margin requirement. Initial is used for initial leverage extension, maintenance for determining liquidations.</p>
<h2 id='get-free-collateral'>Get Free Collateral</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">freeCollateral</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getFreeCollateral</span><span class="p">();</span>
</code></pre></div>
<p>Free collateral is the difference between your total collateral and your initial margin requirement.</p>
<h2 id='get-leverage'>Get Leverage</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>    <span class="kd">const</span> <span class="nx">leverage</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">getLeverage</span><span class="p">();</span>
</code></pre></div>
<p>Leverage is the total liability value (borrows plus total perp position) divided by net asset value (total assets plus total liabilities)</p>
<h1 id='orderbook'>Orderbook</h1><h2 id='slot-subscription'>Slot Subscription</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>   <span class="k">import</span> <span class="p">{</span><span class="nx">Connection</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@solana/web3.js</span><span class="dl">"</span><span class="p">;</span>
   <span class="k">import</span> <span class="p">{</span><span class="nx">SlotSubscriber</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

   <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.mainnet-beta.solana.com</span><span class="dl">"</span><span class="p">);</span>
   <span class="kd">const</span> <span class="nx">slotSubscriber</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SlotSubscriber</span><span class="p">(</span><span class="nx">connection</span><span class="p">);</span>

   <span class="k">await</span> <span class="nx">slotSubscriber</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
   <span class="kd">const</span> <span class="nx">slot</span> <span class="o">=</span> <span class="nx">slotSubscriber</span><span class="p">.</span><span class="nx">getSlot</span><span class="p">();</span>

   <span class="nx">slotSubscriber</span><span class="p">.</span><span class="nx">eventEmitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">newSlot</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">slot</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">new slot</span><span class="dl">'</span><span class="p">,</span> <span class="nx">slot</span><span class="p">);</span>
   <span class="p">});</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>connection</td>
<td>Connection object specifying solana rpc url</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>

<p>The slot subscriber subscribes to the latest slot and updates the slot value every time a new slot is received. The state of the orderbook is dependent on the slot value, so to build the orderbook you must keep track of the slot value.</p>
<h2 id='user-subscription'>User Subscription</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code>   <span class="k">import</span> <span class="p">{</span><span class="nx">Connection</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@solana/web3.js</span><span class="dl">"</span><span class="p">;</span>
   <span class="k">import</span> <span class="p">{</span><span class="nx">DriftClient</span><span class="p">,</span> <span class="nx">UserMap</span><span class="p">,</span> <span class="nx">Wallet</span><span class="p">,</span> <span class="nx">loadKeypair</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

   <span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.mainnet-beta.solana.com</span><span class="dl">"</span><span class="p">);</span>

   <span class="kd">const</span> <span class="nx">keyPairFile</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">~/.config/solana/my-keypair.json</span><span class="dl">'</span><span class="p">;</span>
   <span class="kd">const</span> <span class="nx">wallet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Wallet</span><span class="p">(</span><span class="nx">loadKeypair</span><span class="p">(</span><span class="nx">privateKeyFile</span><span class="p">))</span>

   <span class="kd">const</span> <span class="nx">driftClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DriftClient</span><span class="p">({</span>
     <span class="nx">connection</span><span class="p">,</span>
     <span class="nx">wallet</span><span class="p">,</span>
     <span class="na">env</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mainnet-beta</span><span class="dl">'</span><span class="p">,</span>
   <span class="p">});</span>

   <span class="k">await</span> <span class="nx">driftClient</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>

   <span class="kd">const</span> <span class="nx">includeIdleUsers</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
   <span class="kd">const</span> <span class="nx">userMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserMap</span><span class="p">(</span><span class="nx">driftClient</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">websocket</span><span class="dl">'</span><span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
   <span class="k">await</span> <span class="nx">userMap</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>driftClient</td>
<td>DriftClient object</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>accountSubscription</td>
<td>Whether to use websocket or polling to subscribe to users</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>includeIdle</td>
<td>Whether to include idle users. An idle user has had no orders, perp position or borrow for 7 days</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>Orders are stored on user accounts. To reconstruct the orderbook, you must keep track of the user accounts that have orders. 
The user map subscribes to user account updates.  </p>
<h2 id='orderbook-subscription'>Orderbook Subscription</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">DLOBSubscriber</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// on-chain subscription to users</span>
<span class="kd">const</span> <span class="nx">userMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserMap</span><span class="p">(</span><span class="nx">driftClient</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">websocket</span><span class="dl">'</span><span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">userMap</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>

 <span class="kd">const</span> <span class="nx">dlobSubscriber</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DLOBSubscriber</span><span class="p">({</span>
    <span class="nx">driftClient</span><span class="p">,</span>
    <span class="na">dlobSource</span><span class="p">:</span> <span class="nx">userMap</span><span class="p">,</span>
    <span class="na">slotSource</span><span class="p">:</span> <span class="nx">slotSubscriber</span><span class="p">,</span>
    <span class="na">updateFrequency</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
 <span class="p">});</span>

<span class="k">await</span> <span class="nx">dlobSubscriber</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="p">{</span><span class="nx">DLOBApiClient</span><span class="p">,</span> <span class="nx">DLOBSubscriber</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@drift-labs/sdk</span><span class="dl">"</span><span class="p">;</span>

 <span class="c1">// Polling from api</span>
 <span class="kd">const</span> <span class="nx">dlobApiClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DLOBApiClient</span><span class="p">({</span>
   <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://dlob.drift.trade/orders/idlWithSlot</span><span class="dl">'</span><span class="p">,</span>
 <span class="p">});</span>

 <span class="kd">const</span> <span class="nx">dlobSubscriber</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DLOBSubscriber</span><span class="p">({</span>
    <span class="nx">driftClient</span><span class="p">,</span>
    <span class="na">dlobSource</span><span class="p">:</span> <span class="nx">dlobApiClient</span><span class="p">,</span>
    <span class="na">slotSource</span><span class="p">:</span> <span class="nx">slotSubscriber</span><span class="p">,</span> 
    <span class="na">updateFrequency</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
 <span class="p">});</span>

 <span class="k">await</span> <span class="nx">dlobSubscriber</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>driftClient</td>
<td>DriftClient object</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>dlobSource</td>
<td>Where to build the orderbook from. Can subscribe to user accounts on-chain using UserMap or request DLOB from api using DLOBApiClient</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>slotSource</td>
<td>Where to get slot from</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>updateFrequency</td>
<td>How often to rebuild the orderbook from the dlobSource in milliseconds</td>
<td>No</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-l2-orderbook'>Get L2 Orderbook</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">l2</span> <span class="o">=</span> <span class="nx">dlobSubscriber</span><span class="p">.</span><span class="nx">getL2</span><span class="p">({</span>
  <span class="na">marketName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SOL-PERP</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">depth</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketName</td>
<td>The market name of the orderbook to get. If not set, marketIndex and marketType must be set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The market index of the orderbook to get. If not set, marketName must be set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketType</td>
<td>The market type of the orderbook to get. If not set, marketName must be set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>depth</td>
<td>The depth of the orderbook to get</td>
<td>Yes</td>
<td>10</td>
</tr>
<tr>
<td>includeVamm</td>
<td>Whether to include vAMM</td>
<td>Yes</td>
<td>false</td>
</tr>
<tr>
<td>fallbackL2Generators</td>
<td>L2OrderbookGenerators for fallback liquidity e.g. vAmm, openbook, phoenix. Unnecessary if includeVamm is true</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>The L2 orderbook is an aggregate of drift dlob orders and, optionally, fallback liquidity.</p>
<h2 id='get-l3-orderbook'>Get L3 Orderbook</h2><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="kd">const</span> <span class="nx">l3</span> <span class="o">=</span> <span class="nx">dlobSubscriber</span><span class="p">.</span><span class="nx">getL3</span><span class="p">({</span>
  <span class="na">marketName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SOL-PERP</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Optional</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>marketName</td>
<td>The market name of the orderbook to get. If not set, marketIndex and marketType must be set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketIndex</td>
<td>The market index of the orderbook to get. If not set, marketName must be set</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>marketType</td>
<td>The market type of the orderbook to get. If not set, marketName must be set</td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p>The L3 orderbook contains every maker order on drift dlob, including the address for the user that placed the order.</p>
<h1 id='api-endpoints'>API Endpoints</h1><h2 id='contracts'>Contracts</h2>
<p>Contracts endpoint gives a high level overview of all the markets available in the protocol.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://mainnet-beta.api.drift.trade/contracts</code></p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">contracts</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://mainnet-beta.api.drift.trade/contracts'</span><span class="p">)</span>
<span class="n">contracts</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://mainnet-beta.api.drift.trade/contracts"</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript tab-typescript"><code><span class="k">import</span> <span class="nx">fetch</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">node-fetch</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span>
            <span class="dl">"</span><span class="s2">https://mainnet-beta.api.drift.trade/contracts</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">Accept</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"contracts"</span><span class="p">:</span><span class="w">
  </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="nl">"contract_index"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ticker_id"</span><span class="p">:</span><span class="s2">"SOL-PERP"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="s2">"SOL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="s2">"USDC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_price"</span><span class="p">:</span><span class="s2">"21.881487"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_volume"</span><span class="p">:</span><span class="s2">"110593.000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_volume"</span><span class="p">:</span><span class="s2">"1788085.901185"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high"</span><span class="p">:</span><span class="s2">"23.852900"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="p">:</span><span class="s2">"21.759228"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"product_type"</span><span class="p">:</span><span class="s2">"PERP"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="s2">"119147.600000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="s2">"21.887634"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="p">:</span><span class="s2">"SOL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_currency"</span><span class="p">:</span><span class="s2">"USDC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"start_timestamp"</span><span class="p">:</span><span class="s2">"1667560505000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"end_timestamp"</span><span class="p">:</span><span class="s2">"1682956473378"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"funding_rate"</span><span class="p">:</span><span class="s2">"0.003867637"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"next_funding_rate"</span><span class="p">:</span><span class="s2">"0.00124"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"next_funding_rate_timestamp"</span><span class="p">:</span><span class="s2">"1682956805000"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-values'>Response Values</h3>
<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ticker_id</td>
<td>market name</td>
</tr>
<tr>
<td>last_price</td>
<td>last trade price</td>
</tr>
<tr>
<td>product_type</td>
<td>either PERP or SPOT</td>
</tr>
<tr>
<td>open_interest</td>
<td>outstanding contracts opened in market, denominated in base currency</td>
</tr>
<tr>
<td>index_price</td>
<td>referenced oracle price for market, used for trigger orders</td>
</tr>
<tr>
<td>next_funding_rate</td>
<td>next predicted funding rate (in %) (based on oracle and market twap difference)</td>
</tr>
<tr>
<td>next_funding_rate_timestamp</td>
<td>time of next funding rate</td>
</tr>
</tbody></table>

<p>This endpoint retrieves all contracts available within the protocol.</p>
<h1 id='historical-data'>Historical Data</h1>
<p>Snapshots are collected by parsing on-chain transaction logs. For convience the below are parsed logs collected, stored as a CSV, and stored off-chain (~99% of records). </p>

<p>Please share any transaction signatures or time ranges you believe might be missing in Drift Protocol Discord.</p>
<h2 id='url-prefix'>URL Prefix</h2>
<p>mainnet-beta:  <code>https://drift-historical-data.s3.eu-west-1.amazonaws.com/program/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH/</code></p>

<p>devnet: <code>https://drift-historical-data.s3.us-east-1.amazonaws.com/program/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH/</code></p>
<h2 id='url-suffix'>URL Suffix</h2><h3 id='schema'>Schema</h3>
<table><thead>
<tr>
<th>recordType</th>
<th>url suffix</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td><code>user/${accountKey}/trades/${year}/${month}</code></td>
</tr>
<tr>
<td>market-trades</td>
<td><code>market/${marketSymbol}/trades/${year}/${month}/${day}</code></td>
</tr>
<tr>
<td>funding-rates</td>
<td><code>market/${marketSymbol}/funding-rates/${year}/${month}</code></td>
</tr>
<tr>
<td>funding-payments</td>
<td><code>user/${accountKey}/funding-payments/${year}/${month}</code></td>
</tr>
<tr>
<td>deposits</td>
<td><code>user/${accountKey}/deposits/${year}/${month}</code></td>
</tr>
<tr>
<td>liquidations</td>
<td><code>user/${accountKey}/liquidations/${year}/${month}</code></td>
</tr>
<tr>
<td>candles</td>
<td><code>market/${marketSymbol}/candles/${year}/${month}/resolution/${candleResolution}</code></td>
</tr>
<tr>
<td>settle-pnl-records</td>
<td><code>user/${accountKey}/settlePnls/${year}/${month}</code></td>
</tr>
</tbody></table>
<h3 id='variables'>Variables</h3>
<table><thead>
<tr>
<th>variable</th>
<th>description</th>
<th>example</th>
</tr>
</thead><tbody>
<tr>
<td>accountKey</td>
<td>user sub account public key (not authority)</td>
<td></td>
</tr>
<tr>
<td>marketSymbol</td>
<td>market name</td>
<td>SOL-PERP</td>
</tr>
<tr>
<td>year</td>
<td></td>
<td>2023</td>
</tr>
<tr>
<td>month</td>
<td></td>
<td>4</td>
</tr>
<tr>
<td>day</td>
<td>utc time</td>
<td>25</td>
</tr>
<tr>
<td>candleResolution</td>
<td></td>
<td>1M</td>
</tr>
</tbody></table>
<h2 id='examples'>Examples</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">outcsv</span> <span class="o">=</span> <span class="n">requets</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://drift-historical-data.s3.eu-west-1.amazonaws.com/program/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH/user/2dy78vpWpquDgAoLB8w8Ewfns9WXYzQx4CGt3HSgZLEe/trades/2023/4'</span><span class="p">)</span><span class="s">'
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl https://drift-historical-data.s3.eu-west-1.amazonaws.com/program/dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH/user/2dy78vpWpquDgAoLB8w8Ewfns9WXYzQx4CGt3HSgZLEe/trades/2023/4 <span class="nt">--output</span> out.csv.gz
</code></pre></div><h1 id='errors'>Errors</h1>
<aside class="notice">
This is a table of program errors as described in the programs IDL.
</aside>

<p>Drift Protocol uses has following error codes:</p>

<table><thead>
<tr>
<th style="text-align: right">code</th>
<th style="text-align: left">name</th>
<th style="text-align: left">msg</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">6000</td>
<td style="text-align: left">InvalidSpotMarketAuthority</td>
<td style="text-align: left">Invalid Spot Market Authority</td>
</tr>
<tr>
<td style="text-align: right">6001</td>
<td style="text-align: left">InvalidInsuranceFundAuthority</td>
<td style="text-align: left">Clearing house not insurance fund authority</td>
</tr>
<tr>
<td style="text-align: right">6002</td>
<td style="text-align: left">InsufficientDeposit</td>
<td style="text-align: left">Insufficient deposit</td>
</tr>
<tr>
<td style="text-align: right">6003</td>
<td style="text-align: left">InsufficientCollateral</td>
<td style="text-align: left">Insufficient collateral</td>
</tr>
<tr>
<td style="text-align: right">6004</td>
<td style="text-align: left">SufficientCollateral</td>
<td style="text-align: left">Sufficient collateral</td>
</tr>
<tr>
<td style="text-align: right">6005</td>
<td style="text-align: left">MaxNumberOfPositions</td>
<td style="text-align: left">Max number of positions taken</td>
</tr>
<tr>
<td style="text-align: right">6006</td>
<td style="text-align: left">AdminControlsPricesDisabled</td>
<td style="text-align: left">Admin Controls Prices Disabled</td>
</tr>
<tr>
<td style="text-align: right">6007</td>
<td style="text-align: left">MarketDelisted</td>
<td style="text-align: left">Market Delisted</td>
</tr>
<tr>
<td style="text-align: right">6008</td>
<td style="text-align: left">MarketIndexAlreadyInitialized</td>
<td style="text-align: left">Market Index Already Initialized</td>
</tr>
<tr>
<td style="text-align: right">6009</td>
<td style="text-align: left">UserAccountAndUserPositionsAccountMismatch</td>
<td style="text-align: left">User Account And User Positions Account Mismatch</td>
</tr>
<tr>
<td style="text-align: right">6010</td>
<td style="text-align: left">UserHasNoPositionInMarket</td>
<td style="text-align: left">User Has No Position In Market</td>
</tr>
<tr>
<td style="text-align: right">6011</td>
<td style="text-align: left">InvalidInitialPeg</td>
<td style="text-align: left">Invalid Initial Peg</td>
</tr>
<tr>
<td style="text-align: right">6012</td>
<td style="text-align: left">InvalidRepegRedundant</td>
<td style="text-align: left">AMM repeg already configured with amt given</td>
</tr>
<tr>
<td style="text-align: right">6013</td>
<td style="text-align: left">InvalidRepegDirection</td>
<td style="text-align: left">AMM repeg incorrect repeg direction</td>
</tr>
<tr>
<td style="text-align: right">6014</td>
<td style="text-align: left">InvalidRepegProfitability</td>
<td style="text-align: left">AMM repeg out of bounds pnl</td>
</tr>
<tr>
<td style="text-align: right">6015</td>
<td style="text-align: left">SlippageOutsideLimit</td>
<td style="text-align: left">Slippage Outside Limit Price</td>
</tr>
<tr>
<td style="text-align: right">6016</td>
<td style="text-align: left">OrderSizeTooSmall</td>
<td style="text-align: left">Order Size Too Small</td>
</tr>
<tr>
<td style="text-align: right">6017</td>
<td style="text-align: left">InvalidUpdateK</td>
<td style="text-align: left">Price change too large when updating K</td>
</tr>
<tr>
<td style="text-align: right">6018</td>
<td style="text-align: left">AdminWithdrawTooLarge</td>
<td style="text-align: left">Admin tried to withdraw amount larger than fees collected</td>
</tr>
<tr>
<td style="text-align: right">6019</td>
<td style="text-align: left">MathError</td>
<td style="text-align: left">Math Error</td>
</tr>
<tr>
<td style="text-align: right">6020</td>
<td style="text-align: left">BnConversionError</td>
<td style="text-align: left">Conversion to u128/u64 failed with an overflow or underflow</td>
</tr>
<tr>
<td style="text-align: right">6021</td>
<td style="text-align: left">ClockUnavailable</td>
<td style="text-align: left">Clock unavailable</td>
</tr>
<tr>
<td style="text-align: right">6022</td>
<td style="text-align: left">UnableToLoadOracle</td>
<td style="text-align: left">Unable To Load Oracles</td>
</tr>
<tr>
<td style="text-align: right">6023</td>
<td style="text-align: left">PriceBandsBreached</td>
<td style="text-align: left">Price Bands Breached</td>
</tr>
<tr>
<td style="text-align: right">6024</td>
<td style="text-align: left">ExchangePaused</td>
<td style="text-align: left">Exchange is paused</td>
</tr>
<tr>
<td style="text-align: right">6025</td>
<td style="text-align: left">InvalidWhitelistToken</td>
<td style="text-align: left">Invalid whitelist token</td>
</tr>
<tr>
<td style="text-align: right">6026</td>
<td style="text-align: left">WhitelistTokenNotFound</td>
<td style="text-align: left">Whitelist token not found</td>
</tr>
<tr>
<td style="text-align: right">6027</td>
<td style="text-align: left">InvalidDiscountToken</td>
<td style="text-align: left">Invalid discount token</td>
</tr>
<tr>
<td style="text-align: right">6028</td>
<td style="text-align: left">DiscountTokenNotFound</td>
<td style="text-align: left">Discount token not found</td>
</tr>
<tr>
<td style="text-align: right">6029</td>
<td style="text-align: left">ReferrerNotFound</td>
<td style="text-align: left">Referrer not found</td>
</tr>
<tr>
<td style="text-align: right">6030</td>
<td style="text-align: left">ReferrerStatsNotFound</td>
<td style="text-align: left">ReferrerNotFound</td>
</tr>
<tr>
<td style="text-align: right">6031</td>
<td style="text-align: left">ReferrerMustBeWritable</td>
<td style="text-align: left">ReferrerMustBeWritable</td>
</tr>
<tr>
<td style="text-align: right">6032</td>
<td style="text-align: left">ReferrerStatsMustBeWritable</td>
<td style="text-align: left">ReferrerMustBeWritable</td>
</tr>
<tr>
<td style="text-align: right">6033</td>
<td style="text-align: left">ReferrerAndReferrerStatsAuthorityUnequal</td>
<td style="text-align: left">ReferrerAndReferrerStatsAuthorityUnequal</td>
</tr>
<tr>
<td style="text-align: right">6034</td>
<td style="text-align: left">InvalidReferrer</td>
<td style="text-align: left">InvalidReferrer</td>
</tr>
<tr>
<td style="text-align: right">6035</td>
<td style="text-align: left">InvalidOracle</td>
<td style="text-align: left">InvalidOracle</td>
</tr>
<tr>
<td style="text-align: right">6036</td>
<td style="text-align: left">OracleNotFound</td>
<td style="text-align: left">OracleNotFound</td>
</tr>
<tr>
<td style="text-align: right">6037</td>
<td style="text-align: left">LiquidationsBlockedByOracle</td>
<td style="text-align: left">Liquidations Blocked By Oracle</td>
</tr>
<tr>
<td style="text-align: right">6038</td>
<td style="text-align: left">MaxDeposit</td>
<td style="text-align: left">Can not deposit more than max deposit</td>
</tr>
<tr>
<td style="text-align: right">6039</td>
<td style="text-align: left">CantDeleteUserWithCollateral</td>
<td style="text-align: left">Can not delete user that still has collateral</td>
</tr>
<tr>
<td style="text-align: right">6040</td>
<td style="text-align: left">InvalidFundingProfitability</td>
<td style="text-align: left">AMM funding out of bounds pnl</td>
</tr>
<tr>
<td style="text-align: right">6041</td>
<td style="text-align: left">CastingFailure</td>
<td style="text-align: left">Casting Failure</td>
</tr>
<tr>
<td style="text-align: right">6042</td>
<td style="text-align: left">InvalidOrder</td>
<td style="text-align: left">InvalidOrder</td>
</tr>
<tr>
<td style="text-align: right">6043</td>
<td style="text-align: left">InvalidOrderMaxTs</td>
<td style="text-align: left">InvalidOrderMaxTs</td>
</tr>
<tr>
<td style="text-align: right">6044</td>
<td style="text-align: left">InvalidOrderMarketType</td>
<td style="text-align: left">InvalidOrderMarketType</td>
</tr>
<tr>
<td style="text-align: right">6045</td>
<td style="text-align: left">InvalidOrderForInitialMarginReq</td>
<td style="text-align: left">InvalidOrderForInitialMarginReq</td>
</tr>
<tr>
<td style="text-align: right">6046</td>
<td style="text-align: left">InvalidOrderNotRiskReducing</td>
<td style="text-align: left">InvalidOrderNotRiskReducing</td>
</tr>
<tr>
<td style="text-align: right">6047</td>
<td style="text-align: left">InvalidOrderSizeTooSmall</td>
<td style="text-align: left">InvalidOrderSizeTooSmall</td>
</tr>
<tr>
<td style="text-align: right">6048</td>
<td style="text-align: left">InvalidOrderNotStepSizeMultiple</td>
<td style="text-align: left">InvalidOrderNotStepSizeMultiple</td>
</tr>
<tr>
<td style="text-align: right">6049</td>
<td style="text-align: left">InvalidOrderBaseQuoteAsset</td>
<td style="text-align: left">InvalidOrderBaseQuoteAsset</td>
</tr>
<tr>
<td style="text-align: right">6050</td>
<td style="text-align: left">InvalidOrderIOC</td>
<td style="text-align: left">InvalidOrderIOC</td>
</tr>
<tr>
<td style="text-align: right">6051</td>
<td style="text-align: left">InvalidOrderPostOnly</td>
<td style="text-align: left">InvalidOrderPostOnly</td>
</tr>
<tr>
<td style="text-align: right">6052</td>
<td style="text-align: left">InvalidOrderIOCPostOnly</td>
<td style="text-align: left">InvalidOrderIOCPostOnly</td>
</tr>
<tr>
<td style="text-align: right">6053</td>
<td style="text-align: left">InvalidOrderTrigger</td>
<td style="text-align: left">InvalidOrderTrigger</td>
</tr>
<tr>
<td style="text-align: right">6054</td>
<td style="text-align: left">InvalidOrderAuction</td>
<td style="text-align: left">InvalidOrderAuction</td>
</tr>
<tr>
<td style="text-align: right">6055</td>
<td style="text-align: left">InvalidOrderOracleOffset</td>
<td style="text-align: left">InvalidOrderOracleOffset</td>
</tr>
<tr>
<td style="text-align: right">6056</td>
<td style="text-align: left">InvalidOrderMinOrderSize</td>
<td style="text-align: left">InvalidOrderMinOrderSize</td>
</tr>
<tr>
<td style="text-align: right">6057</td>
<td style="text-align: left">PlacePostOnlyLimitFailure</td>
<td style="text-align: left">Failed to Place Post-Only Limit Order</td>
</tr>
<tr>
<td style="text-align: right">6058</td>
<td style="text-align: left">UserHasNoOrder</td>
<td style="text-align: left">User has no order</td>
</tr>
<tr>
<td style="text-align: right">6059</td>
<td style="text-align: left">OrderAmountTooSmall</td>
<td style="text-align: left">Order Amount Too Small</td>
</tr>
<tr>
<td style="text-align: right">6060</td>
<td style="text-align: left">MaxNumberOfOrders</td>
<td style="text-align: left">Max number of orders taken</td>
</tr>
<tr>
<td style="text-align: right">6061</td>
<td style="text-align: left">OrderDoesNotExist</td>
<td style="text-align: left">Order does not exist</td>
</tr>
<tr>
<td style="text-align: right">6062</td>
<td style="text-align: left">OrderNotOpen</td>
<td style="text-align: left">Order not open</td>
</tr>
<tr>
<td style="text-align: right">6063</td>
<td style="text-align: left">FillOrderDidNotUpdateState</td>
<td style="text-align: left">FillOrderDidNotUpdateState</td>
</tr>
<tr>
<td style="text-align: right">6064</td>
<td style="text-align: left">ReduceOnlyOrderIncreasedRisk</td>
<td style="text-align: left">Reduce only order increased risk</td>
</tr>
<tr>
<td style="text-align: right">6065</td>
<td style="text-align: left">UnableToLoadAccountLoader</td>
<td style="text-align: left">Unable to load AccountLoader</td>
</tr>
<tr>
<td style="text-align: right">6066</td>
<td style="text-align: left">TradeSizeTooLarge</td>
<td style="text-align: left">Trade Size Too Large</td>
</tr>
<tr>
<td style="text-align: right">6067</td>
<td style="text-align: left">UserCantReferThemselves</td>
<td style="text-align: left">User cant refer themselves</td>
</tr>
<tr>
<td style="text-align: right">6068</td>
<td style="text-align: left">DidNotReceiveExpectedReferrer</td>
<td style="text-align: left">Did not receive expected referrer</td>
</tr>
<tr>
<td style="text-align: right">6069</td>
<td style="text-align: left">CouldNotDeserializeReferrer</td>
<td style="text-align: left">Could not deserialize referrer</td>
</tr>
<tr>
<td style="text-align: right">6070</td>
<td style="text-align: left">CouldNotDeserializeReferrerStats</td>
<td style="text-align: left">Could not deserialize referrer stats</td>
</tr>
<tr>
<td style="text-align: right">6071</td>
<td style="text-align: left">UserOrderIdAlreadyInUse</td>
<td style="text-align: left">User Order Id Already In Use</td>
</tr>
<tr>
<td style="text-align: right">6072</td>
<td style="text-align: left">NoPositionsLiquidatable</td>
<td style="text-align: left">No positions liquidatable</td>
</tr>
<tr>
<td style="text-align: right">6073</td>
<td style="text-align: left">InvalidMarginRatio</td>
<td style="text-align: left">Invalid Margin Ratio</td>
</tr>
<tr>
<td style="text-align: right">6074</td>
<td style="text-align: left">CantCancelPostOnlyOrder</td>
<td style="text-align: left">Cant Cancel Post Only Order</td>
</tr>
<tr>
<td style="text-align: right">6075</td>
<td style="text-align: left">InvalidOracleOffset</td>
<td style="text-align: left">InvalidOracleOffset</td>
</tr>
<tr>
<td style="text-align: right">6076</td>
<td style="text-align: left">CantExpireOrders</td>
<td style="text-align: left">CantExpireOrders</td>
</tr>
<tr>
<td style="text-align: right">6077</td>
<td style="text-align: left">CouldNotLoadMarketData</td>
<td style="text-align: left">CouldNotLoadMarketData</td>
</tr>
<tr>
<td style="text-align: right">6078</td>
<td style="text-align: left">PerpMarketNotFound</td>
<td style="text-align: left">PerpMarketNotFound</td>
</tr>
<tr>
<td style="text-align: right">6079</td>
<td style="text-align: left">InvalidMarketAccount</td>
<td style="text-align: left">InvalidMarketAccount</td>
</tr>
<tr>
<td style="text-align: right">6080</td>
<td style="text-align: left">UnableToLoadPerpMarketAccount</td>
<td style="text-align: left">UnableToLoadMarketAccount</td>
</tr>
<tr>
<td style="text-align: right">6081</td>
<td style="text-align: left">MarketWrongMutability</td>
<td style="text-align: left">MarketWrongMutability</td>
</tr>
<tr>
<td style="text-align: right">6082</td>
<td style="text-align: left">UnableToCastUnixTime</td>
<td style="text-align: left">UnableToCastUnixTime</td>
</tr>
<tr>
<td style="text-align: right">6083</td>
<td style="text-align: left">CouldNotFindSpotPosition</td>
<td style="text-align: left">CouldNotFindSpotPosition</td>
</tr>
<tr>
<td style="text-align: right">6084</td>
<td style="text-align: left">NoSpotPositionAvailable</td>
<td style="text-align: left">NoSpotPositionAvailable</td>
</tr>
<tr>
<td style="text-align: right">6085</td>
<td style="text-align: left">InvalidSpotMarketInitialization</td>
<td style="text-align: left">InvalidSpotMarketInitialization</td>
</tr>
<tr>
<td style="text-align: right">6086</td>
<td style="text-align: left">CouldNotLoadSpotMarketData</td>
<td style="text-align: left">CouldNotLoadSpotMarketData</td>
</tr>
<tr>
<td style="text-align: right">6087</td>
<td style="text-align: left">SpotMarketNotFound</td>
<td style="text-align: left">SpotMarketNotFound</td>
</tr>
<tr>
<td style="text-align: right">6088</td>
<td style="text-align: left">InvalidSpotMarketAccount</td>
<td style="text-align: left">InvalidSpotMarketAccount</td>
</tr>
<tr>
<td style="text-align: right">6089</td>
<td style="text-align: left">UnableToLoadSpotMarketAccount</td>
<td style="text-align: left">UnableToLoadSpotMarketAccount</td>
</tr>
<tr>
<td style="text-align: right">6090</td>
<td style="text-align: left">SpotMarketWrongMutability</td>
<td style="text-align: left">SpotMarketWrongMutability</td>
</tr>
<tr>
<td style="text-align: right">6091</td>
<td style="text-align: left">SpotMarketInterestNotUpToDate</td>
<td style="text-align: left">SpotInterestNotUpToDate</td>
</tr>
<tr>
<td style="text-align: right">6092</td>
<td style="text-align: left">SpotMarketInsufficientDeposits</td>
<td style="text-align: left">SpotMarketInsufficientDeposits</td>
</tr>
<tr>
<td style="text-align: right">6093</td>
<td style="text-align: left">UserMustSettleTheirOwnPositiveUnsettledPNL</td>
<td style="text-align: left">UserMustSettleTheirOwnPositiveUnsettledPNL</td>
</tr>
<tr>
<td style="text-align: right">6094</td>
<td style="text-align: left">CantUpdatePoolBalanceType</td>
<td style="text-align: left">CantUpdatePoolBalanceType</td>
</tr>
<tr>
<td style="text-align: right">6095</td>
<td style="text-align: left">InsufficientCollateralForSettlingPNL</td>
<td style="text-align: left">InsufficientCollateralForSettlingPNL</td>
</tr>
<tr>
<td style="text-align: right">6096</td>
<td style="text-align: left">AMMNotUpdatedInSameSlot</td>
<td style="text-align: left">AMMNotUpdatedInSameSlot</td>
</tr>
<tr>
<td style="text-align: right">6097</td>
<td style="text-align: left">AuctionNotComplete</td>
<td style="text-align: left">AuctionNotComplete</td>
</tr>
<tr>
<td style="text-align: right">6098</td>
<td style="text-align: left">MakerNotFound</td>
<td style="text-align: left">MakerNotFound</td>
</tr>
<tr>
<td style="text-align: right">6099</td>
<td style="text-align: left">MakerStatsNotFound</td>
<td style="text-align: left">MakerNotFound</td>
</tr>
<tr>
<td style="text-align: right">6100</td>
<td style="text-align: left">MakerMustBeWritable</td>
<td style="text-align: left">MakerMustBeWritable</td>
</tr>
<tr>
<td style="text-align: right">6101</td>
<td style="text-align: left">MakerStatsMustBeWritable</td>
<td style="text-align: left">MakerMustBeWritable</td>
</tr>
<tr>
<td style="text-align: right">6102</td>
<td style="text-align: left">MakerOrderNotFound</td>
<td style="text-align: left">MakerOrderNotFound</td>
</tr>
<tr>
<td style="text-align: right">6103</td>
<td style="text-align: left">CouldNotDeserializeMaker</td>
<td style="text-align: left">CouldNotDeserializeMaker</td>
</tr>
<tr>
<td style="text-align: right">6104</td>
<td style="text-align: left">CouldNotDeserializeMakerStats</td>
<td style="text-align: left">CouldNotDeserializeMaker</td>
</tr>
<tr>
<td style="text-align: right">6105</td>
<td style="text-align: left">AuctionPriceDoesNotSatisfyMaker</td>
<td style="text-align: left">AuctionPriceDoesNotSatisfyMaker</td>
</tr>
<tr>
<td style="text-align: right">6106</td>
<td style="text-align: left">MakerCantFulfillOwnOrder</td>
<td style="text-align: left">MakerCantFulfillOwnOrder</td>
</tr>
<tr>
<td style="text-align: right">6107</td>
<td style="text-align: left">MakerOrderMustBePostOnly</td>
<td style="text-align: left">MakerOrderMustBePostOnly</td>
</tr>
<tr>
<td style="text-align: right">6108</td>
<td style="text-align: left">CantMatchTwoPostOnlys</td>
<td style="text-align: left">CantMatchTwoPostOnlys</td>
</tr>
<tr>
<td style="text-align: right">6109</td>
<td style="text-align: left">OrderBreachesOraclePriceLimits</td>
<td style="text-align: left">OrderBreachesOraclePriceLimits</td>
</tr>
<tr>
<td style="text-align: right">6110</td>
<td style="text-align: left">OrderMustBeTriggeredFirst</td>
<td style="text-align: left">OrderMustBeTriggeredFirst</td>
</tr>
<tr>
<td style="text-align: right">6111</td>
<td style="text-align: left">OrderNotTriggerable</td>
<td style="text-align: left">OrderNotTriggerable</td>
</tr>
<tr>
<td style="text-align: right">6112</td>
<td style="text-align: left">OrderDidNotSatisfyTriggerCondition</td>
<td style="text-align: left">OrderDidNotSatisfyTriggerCondition</td>
</tr>
<tr>
<td style="text-align: right">6113</td>
<td style="text-align: left">PositionAlreadyBeingLiquidated</td>
<td style="text-align: left">PositionAlreadyBeingLiquidated</td>
</tr>
<tr>
<td style="text-align: right">6114</td>
<td style="text-align: left">PositionDoesntHaveOpenPositionOrOrders</td>
<td style="text-align: left">PositionDoesntHaveOpenPositionOrOrders</td>
</tr>
<tr>
<td style="text-align: right">6115</td>
<td style="text-align: left">AllOrdersAreAlreadyLiquidations</td>
<td style="text-align: left">AllOrdersAreAlreadyLiquidations</td>
</tr>
<tr>
<td style="text-align: right">6116</td>
<td style="text-align: left">CantCancelLiquidationOrder</td>
<td style="text-align: left">CantCancelLiquidationOrder</td>
</tr>
<tr>
<td style="text-align: right">6117</td>
<td style="text-align: left">UserIsBeingLiquidated</td>
<td style="text-align: left">UserIsBeingLiquidated</td>
</tr>
<tr>
<td style="text-align: right">6118</td>
<td style="text-align: left">LiquidationsOngoing</td>
<td style="text-align: left">LiquidationsOngoing</td>
</tr>
<tr>
<td style="text-align: right">6119</td>
<td style="text-align: left">WrongSpotBalanceType</td>
<td style="text-align: left">WrongSpotBalanceType</td>
</tr>
<tr>
<td style="text-align: right">6120</td>
<td style="text-align: left">UserCantLiquidateThemself</td>
<td style="text-align: left">UserCantLiquidateThemself</td>
</tr>
<tr>
<td style="text-align: right">6121</td>
<td style="text-align: left">InvalidPerpPositionToLiquidate</td>
<td style="text-align: left">InvalidPerpPositionToLiquidate</td>
</tr>
<tr>
<td style="text-align: right">6122</td>
<td style="text-align: left">InvalidBaseAssetAmountForLiquidatePerp</td>
<td style="text-align: left">InvalidBaseAssetAmountForLiquidatePerp</td>
</tr>
<tr>
<td style="text-align: right">6123</td>
<td style="text-align: left">InvalidPositionLastFundingRate</td>
<td style="text-align: left">InvalidPositionLastFundingRate</td>
</tr>
<tr>
<td style="text-align: right">6124</td>
<td style="text-align: left">InvalidPositionDelta</td>
<td style="text-align: left">InvalidPositionDelta</td>
</tr>
<tr>
<td style="text-align: right">6125</td>
<td style="text-align: left">UserBankrupt</td>
<td style="text-align: left">UserBankrupt</td>
</tr>
<tr>
<td style="text-align: right">6126</td>
<td style="text-align: left">UserNotBankrupt</td>
<td style="text-align: left">UserNotBankrupt</td>
</tr>
<tr>
<td style="text-align: right">6127</td>
<td style="text-align: left">UserHasInvalidBorrow</td>
<td style="text-align: left">UserHasInvalidBorrow</td>
</tr>
<tr>
<td style="text-align: right">6128</td>
<td style="text-align: left">DailyWithdrawLimit</td>
<td style="text-align: left">DailyWithdrawLimit</td>
</tr>
<tr>
<td style="text-align: right">6129</td>
<td style="text-align: left">DefaultError</td>
<td style="text-align: left">DefaultError</td>
</tr>
<tr>
<td style="text-align: right">6130</td>
<td style="text-align: left">InsufficientLPTokens</td>
<td style="text-align: left">Insufficient LP tokens</td>
</tr>
<tr>
<td style="text-align: right">6131</td>
<td style="text-align: left">CantLPWithPerpPosition</td>
<td style="text-align: left">Cant LP with a market position</td>
</tr>
<tr>
<td style="text-align: right">6132</td>
<td style="text-align: left">UnableToBurnLPTokens</td>
<td style="text-align: left">Unable to burn LP tokens</td>
</tr>
<tr>
<td style="text-align: right">6133</td>
<td style="text-align: left">TryingToRemoveLiquidityTooFast</td>
<td style="text-align: left">Trying to remove liqudity too fast after adding it</td>
</tr>
<tr>
<td style="text-align: right">6134</td>
<td style="text-align: left">InvalidSpotMarketVault</td>
<td style="text-align: left">Invalid Spot Market Vault</td>
</tr>
<tr>
<td style="text-align: right">6135</td>
<td style="text-align: left">InvalidSpotMarketState</td>
<td style="text-align: left">Invalid Spot Market State</td>
</tr>
<tr>
<td style="text-align: right">6136</td>
<td style="text-align: left">InvalidSerumProgram</td>
<td style="text-align: left">InvalidSerumProgram</td>
</tr>
<tr>
<td style="text-align: right">6137</td>
<td style="text-align: left">InvalidSerumMarket</td>
<td style="text-align: left">InvalidSerumMarket</td>
</tr>
<tr>
<td style="text-align: right">6138</td>
<td style="text-align: left">InvalidSerumBids</td>
<td style="text-align: left">InvalidSerumBids</td>
</tr>
<tr>
<td style="text-align: right">6139</td>
<td style="text-align: left">InvalidSerumAsks</td>
<td style="text-align: left">InvalidSerumAsks</td>
</tr>
<tr>
<td style="text-align: right">6140</td>
<td style="text-align: left">InvalidSerumOpenOrders</td>
<td style="text-align: left">InvalidSerumOpenOrders</td>
</tr>
<tr>
<td style="text-align: right">6141</td>
<td style="text-align: left">FailedSerumCPI</td>
<td style="text-align: left">FailedSerumCPI</td>
</tr>
<tr>
<td style="text-align: right">6142</td>
<td style="text-align: left">FailedToFillOnExternalMarket</td>
<td style="text-align: left">FailedToFillOnExternalMarket</td>
</tr>
<tr>
<td style="text-align: right">6143</td>
<td style="text-align: left">InvalidFulfillmentConfig</td>
<td style="text-align: left">InvalidFulfillmentConfig</td>
</tr>
<tr>
<td style="text-align: right">6144</td>
<td style="text-align: left">InvalidFeeStructure</td>
<td style="text-align: left">InvalidFeeStructure</td>
</tr>
<tr>
<td style="text-align: right">6145</td>
<td style="text-align: left">InsufficientIFShares</td>
<td style="text-align: left">Insufficient IF shares</td>
</tr>
<tr>
<td style="text-align: right">6146</td>
<td style="text-align: left">MarketActionPaused</td>
<td style="text-align: left">the Market has paused this action</td>
</tr>
<tr>
<td style="text-align: right">6147</td>
<td style="text-align: left">MarketPlaceOrderPaused</td>
<td style="text-align: left">the Market status doesnt allow placing orders</td>
</tr>
<tr>
<td style="text-align: right">6148</td>
<td style="text-align: left">MarketFillOrderPaused</td>
<td style="text-align: left">the Market status doesnt allow filling orders</td>
</tr>
<tr>
<td style="text-align: right">6149</td>
<td style="text-align: left">MarketWithdrawPaused</td>
<td style="text-align: left">the Market status doesnt allow withdraws</td>
</tr>
<tr>
<td style="text-align: right">6150</td>
<td style="text-align: left">ProtectedAssetTierViolation</td>
<td style="text-align: left">Action violates the Protected Asset Tier rules</td>
</tr>
<tr>
<td style="text-align: right">6151</td>
<td style="text-align: left">IsolatedAssetTierViolation</td>
<td style="text-align: left">Action violates the Isolated Asset Tier rules</td>
</tr>
<tr>
<td style="text-align: right">6152</td>
<td style="text-align: left">UserCantBeDeleted</td>
<td style="text-align: left">User Cant Be Deleted</td>
</tr>
<tr>
<td style="text-align: right">6153</td>
<td style="text-align: left">ReduceOnlyWithdrawIncreasedRisk</td>
<td style="text-align: left">Reduce Only Withdraw Increased Risk</td>
</tr>
<tr>
<td style="text-align: right">6154</td>
<td style="text-align: left">MaxOpenInterest</td>
<td style="text-align: left">Max Open Interest</td>
</tr>
<tr>
<td style="text-align: right">6155</td>
<td style="text-align: left">CantResolvePerpBankruptcy</td>
<td style="text-align: left">Cant Resolve Perp Bankruptcy</td>
</tr>
<tr>
<td style="text-align: right">6156</td>
<td style="text-align: left">LiquidationDoesntSatisfyLimitPrice</td>
<td style="text-align: left">Liquidation Doesnt Satisfy Limit Price</td>
</tr>
<tr>
<td style="text-align: right">6157</td>
<td style="text-align: left">MarginTradingDisabled</td>
<td style="text-align: left">Margin Trading Disabled</td>
</tr>
<tr>
<td style="text-align: right">6158</td>
<td style="text-align: left">InvalidMarketStatusToSettlePnl</td>
<td style="text-align: left">Invalid Market Status to Settle Perp Pnl</td>
</tr>
<tr>
<td style="text-align: right">6159</td>
<td style="text-align: left">PerpMarketNotInSettlement</td>
<td style="text-align: left">PerpMarketNotInSettlement</td>
</tr>
<tr>
<td style="text-align: right">6160</td>
<td style="text-align: left">PerpMarketNotInReduceOnly</td>
<td style="text-align: left">PerpMarketNotInReduceOnly</td>
</tr>
<tr>
<td style="text-align: right">6161</td>
<td style="text-align: left">PerpMarketSettlementBufferNotReached</td>
<td style="text-align: left">PerpMarketSettlementBufferNotReached</td>
</tr>
<tr>
<td style="text-align: right">6162</td>
<td style="text-align: left">PerpMarketSettlementUserHasOpenOrders</td>
<td style="text-align: left">PerpMarketSettlementUserHasOpenOrders</td>
</tr>
<tr>
<td style="text-align: right">6163</td>
<td style="text-align: left">PerpMarketSettlementUserHasActiveLP</td>
<td style="text-align: left">PerpMarketSettlementUserHasActiveLP</td>
</tr>
<tr>
<td style="text-align: right">6164</td>
<td style="text-align: left">UnableToSettleExpiredUserPosition</td>
<td style="text-align: left">UnableToSettleExpiredUserPosition</td>
</tr>
<tr>
<td style="text-align: right">6165</td>
<td style="text-align: left">UnequalMarketIndexForSpotTransfer</td>
<td style="text-align: left">UnequalMarketIndexForSpotTransfer</td>
</tr>
<tr>
<td style="text-align: right">6166</td>
<td style="text-align: left">InvalidPerpPositionDetected</td>
<td style="text-align: left">InvalidPerpPositionDetected</td>
</tr>
<tr>
<td style="text-align: right">6167</td>
<td style="text-align: left">InvalidSpotPositionDetected</td>
<td style="text-align: left">InvalidSpotPositionDetected</td>
</tr>
<tr>
<td style="text-align: right">6168</td>
<td style="text-align: left">InvalidAmmDetected</td>
<td style="text-align: left">InvalidAmmDetected</td>
</tr>
<tr>
<td style="text-align: right">6169</td>
<td style="text-align: left">InvalidAmmForFillDetected</td>
<td style="text-align: left">InvalidAmmForFillDetected</td>
</tr>
<tr>
<td style="text-align: right">6170</td>
<td style="text-align: left">InvalidAmmLimitPriceOverride</td>
<td style="text-align: left">InvalidAmmLimitPriceOverride</td>
</tr>
<tr>
<td style="text-align: right">6171</td>
<td style="text-align: left">InvalidOrderFillPrice</td>
<td style="text-align: left">InvalidOrderFillPrice</td>
</tr>
<tr>
<td style="text-align: right">6172</td>
<td style="text-align: left">SpotMarketBalanceInvariantViolated</td>
<td style="text-align: left">SpotMarketBalanceInvariantViolated</td>
</tr>
<tr>
<td style="text-align: right">6173</td>
<td style="text-align: left">SpotMarketVaultInvariantViolated</td>
<td style="text-align: left">SpotMarketVaultInvariantViolated</td>
</tr>
<tr>
<td style="text-align: right">6174</td>
<td style="text-align: left">InvalidPDA</td>
<td style="text-align: left">InvalidPDA</td>
</tr>
<tr>
<td style="text-align: right">6175</td>
<td style="text-align: left">InvalidPDASigner</td>
<td style="text-align: left">InvalidPDASigner</td>
</tr>
<tr>
<td style="text-align: right">6176</td>
<td style="text-align: left">RevenueSettingsCannotSettleToIF</td>
<td style="text-align: left">RevenueSettingsCannotSettleToIF</td>
</tr>
<tr>
<td style="text-align: right">6177</td>
<td style="text-align: left">NoRevenueToSettleToIF</td>
<td style="text-align: left">NoRevenueToSettleToIF</td>
</tr>
<tr>
<td style="text-align: right">6178</td>
<td style="text-align: left">NoAmmPerpPnlDeficit</td>
<td style="text-align: left">NoAmmPerpPnlDeficit</td>
</tr>
<tr>
<td style="text-align: right">6179</td>
<td style="text-align: left">SufficientPerpPnlPool</td>
<td style="text-align: left">SufficientPerpPnlPool</td>
</tr>
<tr>
<td style="text-align: right">6180</td>
<td style="text-align: left">InsufficientPerpPnlPool</td>
<td style="text-align: left">InsufficientPerpPnlPool</td>
</tr>
<tr>
<td style="text-align: right">6181</td>
<td style="text-align: left">PerpPnlDeficitBelowThreshold</td>
<td style="text-align: left">PerpPnlDeficitBelowThreshold</td>
</tr>
<tr>
<td style="text-align: right">6182</td>
<td style="text-align: left">MaxRevenueWithdrawPerPeriodReached</td>
<td style="text-align: left">MaxRevenueWithdrawPerPeriodReached</td>
</tr>
<tr>
<td style="text-align: right">6183</td>
<td style="text-align: left">MaxIFWithdrawReached</td>
<td style="text-align: left">InvalidSpotPositionDetected</td>
</tr>
<tr>
<td style="text-align: right">6184</td>
<td style="text-align: left">NoIFWithdrawAvailable</td>
<td style="text-align: left">NoIFWithdrawAvailable</td>
</tr>
<tr>
<td style="text-align: right">6185</td>
<td style="text-align: left">InvalidIFUnstake</td>
<td style="text-align: left">InvalidIFUnstake</td>
</tr>
<tr>
<td style="text-align: right">6186</td>
<td style="text-align: left">InvalidIFUnstakeSize</td>
<td style="text-align: left">InvalidIFUnstakeSize</td>
</tr>
<tr>
<td style="text-align: right">6187</td>
<td style="text-align: left">InvalidIFUnstakeCancel</td>
<td style="text-align: left">InvalidIFUnstakeCancel</td>
</tr>
<tr>
<td style="text-align: right">6188</td>
<td style="text-align: left">InvalidIFForNewStakes</td>
<td style="text-align: left">InvalidIFForNewStakes</td>
</tr>
<tr>
<td style="text-align: right">6189</td>
<td style="text-align: left">InvalidIFRebase</td>
<td style="text-align: left">InvalidIFRebase</td>
</tr>
<tr>
<td style="text-align: right">6190</td>
<td style="text-align: left">InvalidInsuranceUnstakeSize</td>
<td style="text-align: left">InvalidInsuranceUnstakeSize</td>
</tr>
<tr>
<td style="text-align: right">6191</td>
<td style="text-align: left">InvalidOrderLimitPrice</td>
<td style="text-align: left">InvalidOrderLimitPrice</td>
</tr>
<tr>
<td style="text-align: right">6192</td>
<td style="text-align: left">InvalidIFDetected</td>
<td style="text-align: left">InvalidIFDetected</td>
</tr>
<tr>
<td style="text-align: right">6193</td>
<td style="text-align: left">InvalidAmmMaxSpreadDetected</td>
<td style="text-align: left">InvalidAmmMaxSpreadDetected</td>
</tr>
<tr>
<td style="text-align: right">6194</td>
<td style="text-align: left">InvalidConcentrationCoef</td>
<td style="text-align: left">InvalidConcentrationCoef</td>
</tr>
<tr>
<td style="text-align: right">6195</td>
<td style="text-align: left">InvalidSrmVault</td>
<td style="text-align: left">InvalidSrmVault</td>
</tr>
<tr>
<td style="text-align: right">6196</td>
<td style="text-align: left">InvalidVaultOwner</td>
<td style="text-align: left">InvalidVaultOwner</td>
</tr>
<tr>
<td style="text-align: right">6197</td>
<td style="text-align: left">InvalidMarketStatusForFills</td>
<td style="text-align: left">InvalidMarketStatusForFills</td>
</tr>
<tr>
<td style="text-align: right">6198</td>
<td style="text-align: left">IFWithdrawRequestInProgress</td>
<td style="text-align: left">IFWithdrawRequestInProgress</td>
</tr>
<tr>
<td style="text-align: right">6199</td>
<td style="text-align: left">NoIFWithdrawRequestInProgress</td>
<td style="text-align: left">NoIFWithdrawRequestInProgress</td>
</tr>
<tr>
<td style="text-align: right">6200</td>
<td style="text-align: left">IFWithdrawRequestTooSmall</td>
<td style="text-align: left">IFWithdrawRequestTooSmall</td>
</tr>
<tr>
<td style="text-align: right">6201</td>
<td style="text-align: left">IncorrectSpotMarketAccountPassed</td>
<td style="text-align: left">IncorrectSpotMarketAccountPassed</td>
</tr>
<tr>
<td style="text-align: right">6202</td>
<td style="text-align: left">BlockchainClockInconsistency</td>
<td style="text-align: left">BlockchainClockInconsistency</td>
</tr>
<tr>
<td style="text-align: right">6203</td>
<td style="text-align: left">InvalidIFSharesDetected</td>
<td style="text-align: left">InvalidIFSharesDetected</td>
</tr>
<tr>
<td style="text-align: right">6204</td>
<td style="text-align: left">NewLPSizeTooSmall</td>
<td style="text-align: left">NewLPSizeTooSmall</td>
</tr>
<tr>
<td style="text-align: right">6205</td>
<td style="text-align: left">MarketStatusInvalidForNewLP</td>
<td style="text-align: left">MarketStatusInvalidForNewLP</td>
</tr>
<tr>
<td style="text-align: right">6206</td>
<td style="text-align: left">InvalidMarkTwapUpdateDetected</td>
<td style="text-align: left">InvalidMarkTwapUpdateDetected</td>
</tr>
<tr>
<td style="text-align: right">6207</td>
<td style="text-align: left">MarketSettlementAttemptOnActiveMarket</td>
<td style="text-align: left">MarketSettlementAttemptOnActiveMarket</td>
</tr>
<tr>
<td style="text-align: right">6208</td>
<td style="text-align: left">MarketSettlementRequiresSettledLP</td>
<td style="text-align: left">MarketSettlementRequiresSettledLP</td>
</tr>
<tr>
<td style="text-align: right">6209</td>
<td style="text-align: left">MarketSettlementAttemptTooEarly</td>
<td style="text-align: left">MarketSettlementAttemptTooEarly</td>
</tr>
<tr>
<td style="text-align: right">6210</td>
<td style="text-align: left">MarketSettlementTargetPriceInvalid</td>
<td style="text-align: left">MarketSettlementTargetPriceInvalid</td>
</tr>
<tr>
<td style="text-align: right">6211</td>
<td style="text-align: left">UnsupportedSpotMarket</td>
<td style="text-align: left">UnsupportedSpotMarket</td>
</tr>
<tr>
<td style="text-align: right">6212</td>
<td style="text-align: left">SpotOrdersDisabled</td>
<td style="text-align: left">SpotOrdersDisabled</td>
</tr>
<tr>
<td style="text-align: right">6213</td>
<td style="text-align: left">MarketBeingInitialized</td>
<td style="text-align: left">Market Being Initialized</td>
</tr>
<tr>
<td style="text-align: right">6214</td>
<td style="text-align: left">InvalidUserSubAccountId</td>
<td style="text-align: left">Invalid Sub Account Id</td>
</tr>
<tr>
<td style="text-align: right">6215</td>
<td style="text-align: left">InvalidTriggerOrderCondition</td>
<td style="text-align: left">Invalid Trigger Order Condition</td>
</tr>
<tr>
<td style="text-align: right">6216</td>
<td style="text-align: left">InvalidSpotPosition</td>
<td style="text-align: left">Invalid Spot Position</td>
</tr>
<tr>
<td style="text-align: right">6217</td>
<td style="text-align: left">CantTransferBetweenSameUserAccount</td>
<td style="text-align: left">Cant transfer between same user account</td>
</tr>
<tr>
<td style="text-align: right">6218</td>
<td style="text-align: left">InvalidPerpPosition</td>
<td style="text-align: left">Invalid Perp Position</td>
</tr>
<tr>
<td style="text-align: right">6219</td>
<td style="text-align: left">UnableToGetLimitPrice</td>
<td style="text-align: left">Unable To Get Limit Price</td>
</tr>
<tr>
<td style="text-align: right">6220</td>
<td style="text-align: left">InvalidLiquidation</td>
<td style="text-align: left">Invalid Liquidation</td>
</tr>
<tr>
<td style="text-align: right">6221</td>
<td style="text-align: left">SpotFulfillmentConfigDisabled</td>
<td style="text-align: left">Spot Fulfullment Config Disabled</td>
</tr>
<tr>
<td style="text-align: right">6222</td>
<td style="text-align: left">InvalidMaker</td>
<td style="text-align: left">Invalid Maker</td>
</tr>
<tr>
<td style="text-align: right">6223</td>
<td style="text-align: left">FailedUnwrap</td>
<td style="text-align: left">Failed Unwrap</td>
</tr>
<tr>
<td style="text-align: right">6224</td>
<td style="text-align: left">MaxNumberOfUsers</td>
<td style="text-align: left">Max Number Of Users</td>
</tr>
<tr>
<td style="text-align: right">6225</td>
<td style="text-align: left">InvalidOracleForSettlePnl</td>
<td style="text-align: left">InvalidOracleForSettlePnl</td>
</tr>
<tr>
<td style="text-align: right">6226</td>
<td style="text-align: left">MarginOrdersOpen</td>
<td style="text-align: left">MarginOrdersOpen</td>
</tr>
<tr>
<td style="text-align: right">6227</td>
<td style="text-align: left">TierViolationLiquidatingPerpPnl</td>
<td style="text-align: left">TierViolationLiquidatingPerpPnl</td>
</tr>
<tr>
<td style="text-align: right">6228</td>
<td style="text-align: left">CouldNotLoadUserData</td>
<td style="text-align: left">CouldNotLoadUserData</td>
</tr>
<tr>
<td style="text-align: right">6229</td>
<td style="text-align: left">UserWrongMutability</td>
<td style="text-align: left">UserWrongMutability</td>
</tr>
<tr>
<td style="text-align: right">6230</td>
<td style="text-align: left">InvalidUserAccount</td>
<td style="text-align: left">InvalidUserAccount</td>
</tr>
<tr>
<td style="text-align: right">6231</td>
<td style="text-align: left">CouldNotLoadUserStatsData</td>
<td style="text-align: left">CouldNotLoadUserData</td>
</tr>
<tr>
<td style="text-align: right">6232</td>
<td style="text-align: left">UserStatsWrongMutability</td>
<td style="text-align: left">UserWrongMutability</td>
</tr>
<tr>
<td style="text-align: right">6233</td>
<td style="text-align: left">InvalidUserStatsAccount</td>
<td style="text-align: left">InvalidUserAccount</td>
</tr>
<tr>
<td style="text-align: right">6234</td>
<td style="text-align: left">UserNotFound</td>
<td style="text-align: left">UserNotFound</td>
</tr>
<tr>
<td style="text-align: right">6235</td>
<td style="text-align: left">UnableToLoadUserAccount</td>
<td style="text-align: left">UnableToLoadUserAccount</td>
</tr>
<tr>
<td style="text-align: right">6236</td>
<td style="text-align: left">UserStatsNotFound</td>
<td style="text-align: left">UserStatsNotFound</td>
</tr>
<tr>
<td style="text-align: right">6237</td>
<td style="text-align: left">UnableToLoadUserStatsAccount</td>
<td style="text-align: left">UnableToLoadUserStatsAccount</td>
</tr>
<tr>
<td style="text-align: right">6238</td>
<td style="text-align: left">UserNotInactive</td>
<td style="text-align: left">User Not Inactive</td>
</tr>
<tr>
<td style="text-align: right">6239</td>
<td style="text-align: left">RevertFill</td>
<td style="text-align: left">RevertFill</td>
</tr>
<tr>
<td style="text-align: right">6240</td>
<td style="text-align: left">InvalidMarketAccountforDeletion</td>
<td style="text-align: left">Invalid MarketAccount for Deletion</td>
</tr>
<tr>
<td style="text-align: right">6241</td>
<td style="text-align: left">InvalidSpotFulfillmentParams</td>
<td style="text-align: left">Invalid Spot Fulfillment Params</td>
</tr>
<tr>
<td style="text-align: right">6242</td>
<td style="text-align: left">FailedToGetMint</td>
<td style="text-align: left">Failed to Get Mint</td>
</tr>
<tr>
<td style="text-align: right">6243</td>
<td style="text-align: left">FailedPhoenixCPI</td>
<td style="text-align: left">FailedPhoenixCPI</td>
</tr>
<tr>
<td style="text-align: right">6244</td>
<td style="text-align: left">FailedToDeserializePhoenixMarket</td>
<td style="text-align: left">FailedToDeserializePhoenixMarket</td>
</tr>
<tr>
<td style="text-align: right">6245</td>
<td style="text-align: left">InvalidPricePrecision</td>
<td style="text-align: left">InvalidPricePrecision</td>
</tr>
<tr>
<td style="text-align: right">6246</td>
<td style="text-align: left">InvalidPhoenixProgram</td>
<td style="text-align: left">InvalidPhoenixProgram</td>
</tr>
<tr>
<td style="text-align: right">6247</td>
<td style="text-align: left">InvalidPhoenixMarket</td>
<td style="text-align: left">InvalidPhoenixMarket</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="typescript">typescript</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
